<section id="about" class="p-note">
  <% if (config.description) { %>
  <%- markdown(config.description) %>
  <% } %>
  <% if (theme.social_links) { %>
  <p>
    <%= __('index.find_me_on') %>
    <% var nb_links = theme.social_links.length %>
    <% var i = 0 %>
    <% for(var {label, icon, link} of theme.social_links) { %>
    <% var title = label || icon %>
    <% if (icon == 'mail') { %>
    <a class="icon u-email" target="_blank" rel="noopener" href="<%- link %>" aria-label="<%- title %>" title="<%- title %>">
      <i class="fa-solid fa-envelope"></i>
      <!--
      --->
    </a>
    <% } else if (icon == 'rss') { %>
    <a class="icon" target="_blank" rel="noopener" href="<%- link %>" aria-label="<%- title %>" title="<%- title %>">
      <i class="fa-solid fa-rss"></i>
    </a>
    <% } else { %>
    <a class="icon u-url" target="_blank" rel="noopener me" href="<%- url_for(link) %>" aria-label="<%- title %>" title="<%- title %>">
      <i class="fa-brands fa-<%= icon %>"></i>
      <!--
      --->
    </a>
    <!--
    ---><% } %>
    <!--
    ---><%= ( nb_links > 0 && i < nb_links-1 ?
            ( i == nb_links-2 ? ' '+__('index.enum_and')+' '
            : __('index.enum_comma')+' ' )
            : '.' ) %>
    <% i+=1 %>
    <% } %>
  </p>
  <% } %>
  <%- partial('_partial/about/skills') %>
  <%- partial('_partial/about/tools') %>
</section>

<% var field_sort = theme.posts_overview.sort_updated ? 'updated' : 'date' %>
<% var site_posts = site.posts.sort(field_sort, 'desc') %>
<% var site_projects = site_posts.filter(function (post) { post.project == true }) %>
<% var post_count = site_posts?.length ?? 0 %>
<% var project_count = site_projects?.length ?? 0 %>

<section id="writing">
  <span class="h1"><a href="<%- url_for(theme.nav.articles) %>"><%= __('index.articles') %></a></span>
  <% if (theme.tags_overview && site.tags.length) { %>
  <span class="h2"><%= __('index.topics') %></span>
  <span class="widget tagcloud">
    <%- tagcloud(theme.tags_overview) %>
  </span>
  <span class="h2"><%= __('index.most_recent') %></span>
  <% } %>
  <ul class="post-list">
    <% if (theme.posts_overview.show_all_posts) { %>
    <% var show_posts = page.posts.sort(field_sort, 'desc') %>
    <% _p('counter.archive_posts', post_count) %>
    <% } else { %>
    <% var show_posts = site_posts.limit(theme.posts_overview.post_count || 5) %>
    <% var visible_post_count = show_posts.length %>
    <% _p('counter.visible_posts', visible_post_count) %>
    <% } %>
    <% show_posts.each(function(post, i){ %>
    <li class="post-item">
      <%- partial('_partial/post/date', { post: post, class_name: 'meta' }) %>
      <span><%- partial('_partial/post/title', { post: post, index: true, class_name: '' }) %></span>
    </li>
    <% }); %>
  </ul>
  <% if (theme.posts_overview.show_all_posts) { %>
  <%- partial('_partial/pagination') %>
  <% } %>
</section>

<% if (project_count) { %>
<%- partial('_partial/projects/list') %>
<% } else { %>
<section id="projects">
  <h1><a href="<%- url_for("projects") %>"><%= __('index.projects') %></a></h1>
  <div class="project-list-title">
    <%- _p('counter.projects', project_count) %>
  </div>
</section>
<% } %>